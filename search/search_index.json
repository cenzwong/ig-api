{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to ig-api","text":"<p>API for trading on IG.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Easy connection management</li> <li>Reusable <code>IGClient</code></li> <li><code>uv</code> powered environment</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>Client facade for the IG Trading API.</p> <p>Attributes:</p> Name Type Description <code>session</code> <code>SessionService</code> <p>Service for session management.</p> <code>accounts</code> <code>AccountsService</code> <p>Service for account management.</p> <code>markets</code> <code>MarketService</code> <p>Service for market management.</p> Source code in <code>src/ig_api/client.py</code> <pre><code>class IGClient:\n    \"\"\"\n    Client facade for the IG Trading API.\n\n    Attributes:\n        session (SessionService): Service for session management.\n        accounts (AccountsService): Service for account management.\n        markets (MarketService): Service for market management.\n    \"\"\"\n\n    def __init__(self):\n        \"\"\"\n        Initializes the IGClient.\n        Loads environment variables and sets up the core API client and services.\n        \"\"\"\n        load_dotenv()\n        self.api_key = os.getenv(\"IG_API_KEY\")\n        self.username = os.getenv(\"IG_USERNAME\")\n        self.password = os.getenv(\"IG_PASSWORD\")\n        self.env = os.getenv(\"IG_ENV\", \"demo\")\n\n        if self.env == \"live\":\n            self.base_url = \"https://api.ig.com/gateway/deal\"\n        else:\n            self.base_url = \"https://demo-api.ig.com/gateway/deal\"\n\n        # Core\n        self.api_client = ApiClient(self.base_url, self.api_key)\n\n        # Services\n        self.session = SessionService(self.api_client)\n        self.accounts = AccountsService(self.api_client)\n        self.markets = MarketService(self.api_client)\n\n    def connect(self) -&gt; dict:\n        \"\"\"\n        Convenience method to authenticates and establish a session.\n        Delegates to self.session.create().\n        \"\"\"\n        return self.session.create(self.username, self.password)\n\n    def logout(self) -&gt; bool:\n        \"\"\"\n        Convenience method to logout.\n        Delegates to self.session.delete().\n        \"\"\"\n        return self.session.delete()\n</code></pre>"},{"location":"api/#ig_api.client.IGClient.__init__","title":"<code>__init__()</code>","text":"<p>Initializes the IGClient. Loads environment variables and sets up the core API client and services.</p> Source code in <code>src/ig_api/client.py</code> <pre><code>def __init__(self):\n    \"\"\"\n    Initializes the IGClient.\n    Loads environment variables and sets up the core API client and services.\n    \"\"\"\n    load_dotenv()\n    self.api_key = os.getenv(\"IG_API_KEY\")\n    self.username = os.getenv(\"IG_USERNAME\")\n    self.password = os.getenv(\"IG_PASSWORD\")\n    self.env = os.getenv(\"IG_ENV\", \"demo\")\n\n    if self.env == \"live\":\n        self.base_url = \"https://api.ig.com/gateway/deal\"\n    else:\n        self.base_url = \"https://demo-api.ig.com/gateway/deal\"\n\n    # Core\n    self.api_client = ApiClient(self.base_url, self.api_key)\n\n    # Services\n    self.session = SessionService(self.api_client)\n    self.accounts = AccountsService(self.api_client)\n    self.markets = MarketService(self.api_client)\n</code></pre>"},{"location":"api/#ig_api.client.IGClient.connect","title":"<code>connect()</code>","text":"<p>Convenience method to authenticates and establish a session. Delegates to self.session.create().</p> Source code in <code>src/ig_api/client.py</code> <pre><code>def connect(self) -&gt; dict:\n    \"\"\"\n    Convenience method to authenticates and establish a session.\n    Delegates to self.session.create().\n    \"\"\"\n    return self.session.create(self.username, self.password)\n</code></pre>"},{"location":"api/#ig_api.client.IGClient.logout","title":"<code>logout()</code>","text":"<p>Convenience method to logout. Delegates to self.session.delete().</p> Source code in <code>src/ig_api/client.py</code> <pre><code>def logout(self) -&gt; bool:\n    \"\"\"\n    Convenience method to logout.\n    Delegates to self.session.delete().\n    \"\"\"\n    return self.session.delete()\n</code></pre>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#installation","title":"Installation","text":"<p>Make sure you have <code>uv</code> installed.</p> <pre><code>uv sync\n</code></pre>"},{"location":"usage/#basic-connection","title":"Basic Connection","text":"<p>To connect to the IG API, use the <code>IGClient</code>:</p> <pre><code>from ig_api import IGClient\n\nclient = IGClient()\nsession = client.connect()\nprint(f\"Connected to account: {session['account_id']}\")\n</code></pre>"},{"location":"usage/#environment-variables","title":"Environment Variables","text":"<p>The client looks for the following in a <code>.env</code> file:</p> <ul> <li><code>IG_API_KEY</code></li> <li><code>IG_USERNAME</code></li> <li><code>IG_PASSWORD</code></li> <li><code>IG_ENV</code> (defaults to <code>demo</code>)</li> </ul>"},{"location":"usage/#session-management","title":"Session Management","text":"<p>The client supports full session lifecycle management.</p>"},{"location":"usage/#reading-session-details","title":"Reading Session Details","text":"<pre><code>details = client.session.read()\nprint(f\"Client ID: {details.get('clientId')}\")\n</code></pre>"},{"location":"usage/#switching-accounts","title":"Switching Accounts","text":"<p>You can switch to another account (e.g., from a spread betting to a CFD account):</p> <pre><code>client.session.switch_account(\"NEW_ACCOUNT_ID\")\n</code></pre>"},{"location":"usage/#accounts-service","title":"Accounts Service","text":"<p>Retrieve a list of all accounts belonging to the client:</p> <pre><code>accounts_data = client.accounts.get_accounts()\nfor account in accounts_data['accounts']:\n    print(account['accountId'])\n</code></pre>"},{"location":"usage/#logging-out","title":"Logging Out","text":"<p>Always logout when finished to invalidate your tokens:</p> <pre><code>client.logout()\n</code></pre>"},{"location":"sample/connect_client/","title":"Connect Client Sample","text":"In\u00a0[1]: Copied! <pre>from ig_api import IGClient\nimport sys\n\ndef main():\n    client = IGClient()\n    try:\n        # 1. Connect\n        session_details = client.connect()\n        print(f\"\\n[1] Connected: CST={session_details['cst'][:10]}...\")\n        \n        # 2. Read Session\n        details = client.session.read()\n        print(f\"\\n[2] Read Session: ClientID={details.get('clientId')}\")\n\n        # 3. Switch Account (Try switching to same account)\n        if client.session.account_id:\n             client.session.switch_account(client.session.account_id)\n        \n        # 4. Logout\n        logout_success = client.logout()\n        print(f\"\\n[4] Logout Successful: {logout_success}\")\n        \n    except Exception as e:\n        print(f\"\\n[!] Failed: {e}\")\n        sys.exit(1)\n\nmain()\n</pre> from ig_api import IGClient import sys  def main():     client = IGClient()     try:         # 1. Connect         session_details = client.connect()         print(f\"\\n[1] Connected: CST={session_details['cst'][:10]}...\")                  # 2. Read Session         details = client.session.read()         print(f\"\\n[2] Read Session: ClientID={details.get('clientId')}\")          # 3. Switch Account (Try switching to same account)         if client.session.account_id:              client.session.switch_account(client.session.account_id)                  # 4. Logout         logout_success = client.logout()         print(f\"\\n[4] Logout Successful: {logout_success}\")              except Exception as e:         print(f\"\\n[!] Failed: {e}\")         sys.exit(1)  main()  <pre>\n[1] Connected: CST=58213d4b81...\n\n[2] Read Session: ClientID=104601718\nAlready on this account. Skipping switch.\n\n[4] Logout Successful: True\n</pre> In\u00a0[\u00a0]: Copied! <pre>\n</pre>"},{"location":"sample/connect_client/#connect-client-sample","title":"Connect Client Sample\u00b6","text":"<p>This notebook demonstrates how to connect to the IG API using the <code>IGClient</code>.</p>"},{"location":"sample/markets_demo/","title":"Markets API Demo","text":"In\u00a0[\u00a0]: Copied! <pre>%load_ext autoreload\n%autoreload 2\nfrom ig_api.client import IGClient\nimport os\nfrom dotenv import load_dotenv\n\n# Load environment variables\nload_dotenv()\n\n# Initialize Client\nclient = IGClient()\n\n# Connect (Authentication)\ntry:\n    client.connect()\n    print(\"Connected successfully\")\nexcept Exception as e:\n    print(f\"Failed to connect: {e}\")\n</pre> %load_ext autoreload %autoreload 2 from ig_api.client import IGClient import os from dotenv import load_dotenv  # Load environment variables load_dotenv()  # Initialize Client client = IGClient()  # Connect (Authentication) try:     client.connect()     print(\"Connected successfully\") except Exception as e:     print(f\"Failed to connect: {e}\") In\u00a0[\u00a0]: Copied! <pre># Define Epics to retrieve\n# Example epics: FTSE 100 Daily (IX.D.FTSE.DAILY.IP) and Wall Street Daily (KB.D.POWER.DAILY.IP)\nepics = [\"IX.D.FTSE.DAILY.IP\", \"KB.D.POWER.DAILY.IP\"]\n\n# Get Market Details\ntry:\n    markets = client.markets.get_markets(epics)\n    print(\"Markets Retrieved:\")\n    print(markets)\nexcept Exception as e:\n    print(f\"Error retrieving markets: {e}\")\n</pre> # Define Epics to retrieve # Example epics: FTSE 100 Daily (IX.D.FTSE.DAILY.IP) and Wall Street Daily (KB.D.POWER.DAILY.IP) epics = [\"IX.D.FTSE.DAILY.IP\", \"KB.D.POWER.DAILY.IP\"]  # Get Market Details try:     markets = client.markets.get_markets(epics)     print(\"Markets Retrieved:\")     print(markets) except Exception as e:     print(f\"Error retrieving markets: {e}\") In\u00a0[\u00a0]: Copied! <pre># Search Markets\n# Example search term: EURGBP\nsearch_term = \"EURGBP\"\n\ntry:\n    search_results = client.markets.search_markets(search_term)\n    print(f\"Search Results for '{search_term}':\")\n    print(search_results)\nexcept Exception as e:\n    print(f\"Error searching markets: {e}\")\n</pre> # Search Markets # Example search term: EURGBP search_term = \"EURGBP\"  try:     search_results = client.markets.search_markets(search_term)     print(f\"Search Results for '{search_term}':\")     print(search_results) except Exception as e:     print(f\"Error searching markets: {e}\") In\u00a0[\u00a0]: Copied! <pre># Get Single Market by Epic\n# Example epic: IX.D.FTSE.DAILY.IP\nepic = \"IX.D.FTSE.DAILY.IP\"\n\ntry:\n    market_details = client.markets.get_market_by_epic(epic)\n    print(f\"Details for {epic}:\")\n    print(market_details)\nexcept Exception as e:\n    print(f\"Error retrieving market details: {e}\")\n</pre> # Get Single Market by Epic # Example epic: IX.D.FTSE.DAILY.IP epic = \"IX.D.FTSE.DAILY.IP\"  try:     market_details = client.markets.get_market_by_epic(epic)     print(f\"Details for {epic}:\")     print(market_details) except Exception as e:     print(f\"Error retrieving market details: {e}\")"},{"location":"sample/markets_demo/#markets-api-demo","title":"Markets API Demo\u00b6","text":"<p>This notebook demonstrates how to use the <code>IGClient</code> to interact with the Markets API (Version 2) and Search Markets.</p>"},{"location":"sample/session_demo/","title":"IG API Session Management Demo","text":"In\u00a0[2]: Copied! <pre>%load_ext autoreload\n%autoreload 2\n\nimport os\nfrom ig_api import IGClient\n</pre> %load_ext autoreload %autoreload 2  import os from ig_api import IGClient <pre>The autoreload extension is already loaded. To reload it, use:\n  %reload_ext autoreload\n</pre> In\u00a0[3]: Copied! <pre>client = IGClient()\nsession = client.connect()\nprint(f\"Connected! Account ID: {session['account_id']}\")\n</pre> client = IGClient() session = client.connect() print(f\"Connected! Account ID: {session['account_id']}\") <pre>Connected! Account ID: Z67TZX\n</pre> In\u00a0[4]: Copied! <pre>details = client.session.read()\nprint(f\"Client ID: {details.get('clientId')}\")\nprint(f\"Currency: {details.get('currencyIsoCode')}\")\n</pre> details = client.session.read() print(f\"Client ID: {details.get('clientId')}\") print(f\"Currency: {details.get('currencyIsoCode')}\") <pre>Client ID: 104601718\nCurrency: None\n</pre> In\u00a0[5]: Copied! <pre># Replace with a valid account ID to test switching\ncurrent_account = client.session.account_id\nprint(f\"Attempting to switch to same account: {current_account}\")\n\ntry:\n    client.session.switch_account(current_account)\nexcept Exception as e:\n    print(f\"Switch result: {e}\")\n</pre> # Replace with a valid account ID to test switching current_account = client.session.account_id print(f\"Attempting to switch to same account: {current_account}\")  try:     client.session.switch_account(current_account) except Exception as e:     print(f\"Switch result: {e}\") <pre>Attempting to switch to same account: Z67TZX\nAlready on this account. Skipping switch.\n</pre> In\u00a0[6]: Copied! <pre>accounts = client.accounts.get_accounts()\nfor account in accounts.get('accounts', []):\n    print(f\"Account: {account.get('accountId')} - {account.get('accountType')}\")\n</pre> accounts = client.accounts.get_accounts() for account in accounts.get('accounts', []):     print(f\"Account: {account.get('accountId')} - {account.get('accountType')}\") <pre>Account: Z67TZW - CFD\nAccount: Z67TZX - SPREADBET\n</pre> In\u00a0[\u00a0]: Copied! <pre>client.logout()\n</pre> client.logout()"},{"location":"sample/session_demo/#ig-api-session-management-demo","title":"IG API Session Management Demo\u00b6","text":"<p>This notebook demonstrates how to connect to the IG Trading API, manage sessions, and switch accounts.</p>"},{"location":"sample/session_demo/#1-connect","title":"1. Connect\u00b6","text":"<p>Initialize the client and connect. Ensure your <code>.env</code> file is set up.</p>"},{"location":"sample/session_demo/#2-read-session-details","title":"2. Read Session Details\u00b6","text":"<p>Get details about the current active session.</p>"},{"location":"sample/session_demo/#3-switch-account","title":"3. Switch Account\u00b6","text":"<p>If you have multiple accounts (e.g., spread betting vs CFD), you can switch.</p>"},{"location":"sample/session_demo/#4-get-accounts","title":"4. Get Accounts\u00b6","text":"<p>List all available accounts.</p>"},{"location":"sample/session_demo/#5-logout","title":"5. Logout\u00b6","text":"<p>Always logout when done.</p>"}]}